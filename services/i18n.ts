
export const translations = {
  zh: {
    appName: "MangaType Live",
    undo: "撤销",
    redo: "重做",
    settings: "设置",
    help: "帮助",
    addFiles: "添加图片",
    addFolder: "添加文件夹",
    gallery: "图库",
    current: "当前图片",
    processAll: "所有图片",
    // New specific translation buttons
    translateCurrent: "翻译当前",
    translateAll: "翻译所有",
    stop: "停止处理",
    saveImage: "保存图片",
    zipAll: "打包下载",
    noImageSelected: "未选择图片",
    dragDrop: "拖拽文件，粘贴图片，或使用侧边栏。",
    properties: "属性",
    deleteBubble: "删除气泡",
    content: "内容",
    enterText: "输入文本...",
    aiAssistant: "AI 助手",
    aiThinking: "AI 思考中...",
    dramatic: "戏剧化",
    casual: "口语化",
    translate: "翻译",
    maskGeometry: "遮罩形状",
    width: "宽",
    height: "高",
    whiteBg: "白底遮罩",
    typography: "排版",
    direction: "方向",
    horizontal: "横排",
    vertical: "竖排",
    size: "字号",
    rotation: "旋转",
    fontFamily: "字体",
    manualAdd: "点击添加",
    toolMode: "工具模式",
    toolBubble: "气泡工具 (Mode 1)",
    toolMask: "气泡工具 (Mode 2)",
    toolBrush: "修补画笔 (Brush)",
    toolNone: "浏览模式",
    translateRegions: "翻译选区",
    translateRegionsDesc: "绘制红框来辅助 AI。在设置中开启“遮罩模式”可仅发送红框内容。",
    importJson: "导入 JSON",
    merge: "合并图层",
    globalStyles: "全局样式",
    concurrency: "并发数",
    noBubbleSelected: "未选中气泡",
    clickBubbleHint: "点击画布上的气泡进行编辑。",
    aiSettings: "AI 设置",
    aiProvider: "AI 提供商",
    baseUrl: "Base URL",
    apiKey: "API Key",
    modelSelection: "模型选择",
    textDetection: "本地文本检测",
    detectionExpansion: "探测框膨胀率",
    detectionExpansionHint: "接收到坐标后，向外扩大的比例。正数扩大，负数缩小。",
    allowAiRotation: "允许 AI 旋转",
    allowAiRotationHint: "尝试让 AI 识别文字倾斜角度（实验性）。",
    allowAiFontSelection: "允许 AI 选择字体",
    allowAiFontSelectionHint: "开启后，AI 会根据语气自动选择草书、毛笔等字体。关闭则全部默认使用黑体。",
    detectionTab: "检测与辅助",
    detectionTabDesc: "配置红框、本地检测与辅助对齐功能。",
    enableMaskedImageMode: "遮罩发送模式",
    enableMaskedImageModeHint: "若图片存在红框，仅将红框内的部分发送给 AI（其余部分留白）。",
    useMasksAsHints: "使用红框作为提示",
    useMasksAsHintsHint: "将红框的坐标作为文本提示发送给 AI，告诉它“这里有文字”。",
    autoDetectBackground: "自动检测背景色",
    autoDetectBackgroundHint: "在移动、缩放或绘制气泡时，自动吸取周围颜色作为遮罩背景（关闭则默认为白色）。",
    enableDialogSnap: "对话框吸附",
    enableDialogSnapHint: "当检测到手动绘制的红框时，自动将 AI 生成的气泡中心吸附到红框中心。",
    forceSnapSize: "强制匹配尺寸",
    forceSnapSizeHint: "吸附时，强制气泡完全继承红框的宽和高，忽略 AI 的尺寸判断。",
    defaultFontSize: "默认字号",
    systemPrompt: "系统提示词",
    cancel: "取消",
    saveSettings: "保存设置",
    manualJsonImport: "手动 JSON 导入",
    pasteJson: "在此粘贴 AI 输出的 JSON...",
    copyPrompt: "复制提示词",
    loadTemplate: "加载模板",
    applyBubbles: "应用气泡",
    envConfigured: "环境变量已配置",
    refreshModels: "刷新模型",
    fetching: "获取中...",
    noModels: "未找到模型",
    failedFetch: "获取失败",
    promptCopied: "提示词已复制！",
    jsonError: "JSON 格式错误",
    processing: "处理中",
    done: "完成",
    error: "错误",
    language: "语言 / Language",
    sure: "确定?",
    galleryTitle: "图库",
    generatedHtml: "生成的 HTML",
    close: "关闭",
    copyHtml: "复制 HTML",
    baseUrlHint: "格式如 https://api.provider.com 或 https://api.provider.com/v1 均可。",
    modelFilterHint: "输入部分字符过滤列表；留空或输入完整模型名则显示全部。",
    preRequestMessages: "请求前置消息",
    preRequestHint: "这些消息将作为对话历史插入在请求图片之前。",
    role: "角色",
    msgContent: "消息内容",
    addMessage: "添加消息",
    translateMenu: "AI 翻译",
    autoDetect: "自动识别 (Auto)",
    maskScan: "红框扫描 (Mask)",
    maskStyle: "遮罩样式",
    shape: "形状",
    shapeRect: "直角",
    shapeRound: "圆角",
    shapeEllipse: "椭圆",
    cornerRadius: "圆角半径",
    feathering: "羽化程度",
    resetStatus: "重置状态",
    // Inpainting Tab
    inpaintingTab: "文字去除 (Inpainting)",
    inpaintingTabDesc: "配置 IOPaint 集成以进行文字擦除。",
    enableInpainting: "启用文字去除",
    enableInpaintingHint: "需要本地运行 IOPaint 服务。",
    inpaintingUrl: "API 地址",
    inpaintingModel: "模型名称",
    inpaintingModelHint: "默认为 `lama`。其他可用模型: `manga`, `mat`, `migan`。",
    // New Sidebar Localization
    textRemoval: "文字去除 (Inpaint)",
    inpaintArea: "擦除选中区域",
    restoreArea: "还原选中区域",
    inpaintDesc: "智能去除/还原红框内的文字。",
    // Clean Box Tool
    cleanBoxTitle: "选区清理",
    cleanBoxDesc: "选中红框进行涂白、填充或还原。",
    smartErase: "智能擦除 (AI)",
    enableInpaintHint: "请先在设置中开启 Inpainting 功能。",
    manualFill: "颜色填充",
    fillColor: "填充颜色",
    fillSelected: "填充选中框",
    batchOperations: "批量操作",
    fillCurrentPage: "填充当前页所有框",
    fillAllPages: "填充图库所有框",
    restore: "还原区域",
    restoreHint: "恢复原始图片内容 (同时移除气泡遮罩)",
    goBoxCleaner: "前往选区清理",
    boxCleanerDesc: "切换到修补模式的选区工具来清理文字。",
    // Workspace Layers
    layerOriginal: "原图",
    layerClean: "擦除后",
    layerFinal: "翻译后",
    deleteInpaint: "删除擦除层",
    // Paint Tool
    brushSize: "画笔大小",
    brushColor: "画笔颜色",
    brushSettings: "画笔设置",
    pickScreenColor: "吸取屏幕颜色",
    // Tooltips
    fontSizeTooltip: "字体大小",
    maskSizeTooltip: "遮罩大小",
    processPending: "处理待办项 (自动)",
    scanCurrent: "扫描当前文字",
    scanAll: "扫描全部文字",
    cleanCurrent: "擦除当前 (去除文字)",
    cleanAll: "擦除全部 (去除文字)",
    pickColor: "屏幕吸管",
    transparentColor: "透明 (无填充)",
    bringToFront: "置于顶层",
    moveUp: "上移一层",
    moveDown: "下移一层",
    sendToBack: "置于底层",
    clearAll: "清空列表",
    skippedRestore: "已跳过 API (点击恢复)",
    skipAPI: "跳过 API 处理",
    copyPromptHint: "复制提示词 (用于外部 AI)",
    loadTemplateHint: "加载示例 JSON",
    helpDocs: {
      title: "使用指南",
      intro: "MangaType Live 是一个网页原生的漫画嵌字工具，集成了 AI 翻译和自动化排版功能。",
      step1Title: "1. 导入图片",
      step1Desc: "点击侧边栏的“添加图片”或直接将图片/文件夹**拖拽**到窗口中。支持粘贴剪贴板中的图片。",
      step2Title: "2. AI 识别与翻译",
      step2Desc: "点击侧边栏的“AI 翻译”按钮，在下拉菜单中选择处理单张或批量处理。支持全自动识别和手动红框辅助。",
      step3Title: "3. 编辑气泡",
      step3Desc: "点击画布上的气泡选中。拖动**8个控制点**调整大小（角点等比缩放，边点单向缩放）。在右侧面板修改文字、字体、排版方向和遮罩样式。",
      step4Title: "4. 导出结果",
      step4Desc: "点击 **Save Image (保存图片)** 下载当前页，或 **ZIP All (打包下载)** 下载所有处理完的图片。**Merge (合并)** 功能可将文字烧录进图片（不可逆）。",
      advancedTitle: "进阶功能解析",
      advancedFeatures: [
        {
          title: "选区工具 (Mode 2)",
          desc: "使用工具栏的“选区工具”框选图片中的特定区域。这些红框可以用来：1. 在“遮罩发送模式”下只翻译框内内容；2. 作为 AI 的位置提示；3. 作为气泡吸附的锚点。"
        },
        {
          title: "本地文本检测 (Local Detection)",
          desc: "这是一个辅助功能，需在本地运行 Python 服务。开启后，可一键扫描图片中的文本区域并自动生成红框。"
        },
        {
          title: "修补画笔 (Brush)",
          desc: "如果自动擦除效果不完美，使用画笔工具手动涂抹修复。你可以直接在“擦除后”的图层上绘制，或者使用吸管吸取周围颜色进行覆盖。"
        },
        {
          title: "合并图层 (Merge Layers)",
          desc: "类似于 Photoshop 的“向下合并”。它会将当前所有悬浮的气泡**永久烧录**进图片的像素数据中。合并后，气泡文字变成图片的一部分，无法再被编辑。这适用于：1. 处理超多气泡防止卡顿；2. 想要在已有的文字上叠加新的效果；3. 导出前确认定稿。"
        }
      ],
      tipsTitle: "快捷键与技巧",
      tipsList: [
        "Ctrl+Z / Ctrl+Y: 撤销 / 重做",
        "选中气泡后 + 鼠标滚轮: 调整字体大小",
        "选中气泡后 + Alt + 鼠标滚轮: 调整气泡遮罩大小",
        "Delete / Backspace: 删除选中气泡",
        "按住 Ctrl 拖动: 精细调整",
        "双击画布空白处: 取消选中"
      ]
    }
  },
  en: {
    appName: "MangaType Live",
    undo: "Undo",
    redo: "Redo",
    settings: "Settings",
    help: "Help",
    addFiles: "Add Files",
    addFolder: "Add Folder",
    gallery: "Gallery",
    current: "Current Image",
    processAll: "All Images",
    // New specific translation buttons
    translateCurrent: "Translate Current Image",
    translateAll: "Translate All Images",
    stop: "Stop",
    saveImage: "Save Image",
    zipAll: "ZIP All",
    noImageSelected: "No Image Selected",
    dragDrop: "Drag & Drop files, Paste image, or use the Sidebar.",
    properties: "Properties",
    deleteBubble: "Delete Bubble",
    content: "Content",
    enterText: "Enter text...",
    aiAssistant: "AI Assistant",
    aiThinking: "AI thinking...",
    dramatic: "Dramatic",
    casual: "Casual",
    translate: "Translate",
    maskGeometry: "Mask Geometry",
    width: "Width",
    height: "Height",
    whiteBg: "White Background",
    typography: "Typography",
    direction: "Direction",
    horizontal: "Horizontal",
    vertical: "Vertical",
    size: "Size",
    rotation: "Rotation",
    fontFamily: "Font Family",
    manualAdd: "Click Add",
    toolMode: "Tool Mode",
    toolBubble: "Bubble Tool (Mode 1)",
    toolMask: "Mask Tool (Mode 2)",
    toolBrush: "Paint Tool (Brush)",
    toolNone: "View Mode",
    translateRegions: "Translate Regions",
    translateRegionsDesc: "Draw red boxes to assist AI. Enable 'Mask Mode' in settings to send only boxed content.",
    importJson: "JSON",
    merge: "Merge",
    globalStyles: "Global Styles",
    concurrency: "Concurrency",
    noBubbleSelected: "No Bubble Selected",
    clickBubbleHint: "Click on a bubble in the canvas to edit its text and properties here.",
    aiSettings: "AI Settings",
    aiProvider: "AI Provider",
    baseUrl: "Base URL",
    apiKey: "API Key",
    modelSelection: "Model Selection",
    textDetection: "Local Text Detection",
    detectionExpansion: "Detection Expansion",
    detectionExpansionHint: "Inflate detected boxes by this ratio. Positive to expand, negative to shrink.",
    allowAiRotation: "Allow AI Rotation",
    allowAiRotationHint: "Attempt to detect text rotation angle (Experimental).",
    allowAiFontSelection: "Allow AI Font Selection",
    allowAiFontSelectionHint: "If enabled, AI will choose fonts (Wild/Brush etc.) based on tone. If disabled, defaults to Noto.",
    detectionTab: "Detection & Masks",
    detectionTabDesc: "Configure masks, local detection, and snapping.",
    enableMaskedImageMode: "Masked Image Mode",
    enableMaskedImageModeHint: "If red boxes exist, send ONLY the boxed content to AI (rest is whitened out).",
    useMasksAsHints: "Use Masks as Hints",
    useMasksAsHintsHint: "Send coordinates of red boxes as text hints to AI.",
    autoDetectBackground: "Auto Detect Background Color",
    autoDetectBackgroundHint: "Automatically sample the bubble edge color when moving or resizing (Defaults to white if off).",
    enableDialogSnap: "Dialog Snapping",
    enableDialogSnapHint: "Automatically snap AI-generated bubble centers to the nearest manual red box center.",
    forceSnapSize: "Force Match Size",
    forceSnapSizeHint: "When snapping, force the bubble to use the red box's dimensions completely.",
    defaultFontSize: "Default Font Size",
    systemPrompt: "System Prompt",
    cancel: "Cancel",
    saveSettings: "Save Settings",
    manualJsonImport: "Manual JSON Import",
    pasteJson: "Paste AI JSON output here...",
    copyPrompt: "Copy AI Prompt",
    loadTemplate: "Load Draft Template",
    applyBubbles: "Apply Bubbles",
    envConfigured: "Environment Configured",
    refreshModels: "Refresh Models",
    fetching: "Fetching...",
    noModels: "No models found",
    failedFetch: "Failed to fetch",
    promptCopied: "Prompt copied!",
    jsonError: "Invalid JSON format",
    processing: "Processing",
    done: "Done",
    error: "Error",
    language: "Language / 语言",
    sure: "Sure?",
    galleryTitle: "Gallery",
    generatedHtml: "Generated HTML",
    close: "Close",
    copyHtml: "Copy HTML",
    baseUrlHint: "Format like https://api.provider.com or https://api.provider.com/v1 both work.",
    modelFilterHint: "Partial text filters list. Empty or exact match shows all.",
    preRequestMessages: "Pre-request Messages",
    preRequestHint: "Messages inserted before the main image request.",
    role: "Role",
    msgContent: "Content",
    addMessage: "Add Message",
    translateMenu: "AI Translate",
    autoDetect: "Auto Detect",
    maskScan: "Mask Scan",
    maskStyle: "Mask Style",
    shape: "Shape",
    shapeRect: "Rect",
    shapeRound: "Round",
    shapeEllipse: "Ellipse",
    cornerRadius: "Corner Radius",
    feathering: "Feathering",
    resetStatus: "Reset Status",
    // Inpainting Tab
    inpaintingTab: "Text Removal (Inpainting)",
    inpaintingTabDesc: "Configure IOPaint integration for text cleaning.",
    enableInpainting: "Enable Inpainting",
    enableInpaintingHint: "Requires local IOPaint service.",
    inpaintingUrl: "API URL",
    inpaintingModel: "Model Name",
    inpaintingModelHint: "Default is `lama`. Others: `manga`, `mat`, `migan`.",
    // New Sidebar Localization
    textRemoval: "Text Removal (Inpaint)",
    inpaintArea: "Inpaint Selected Area",
    restoreArea: "Restore Selected Area",
    inpaintDesc: "Uses local IOPaint API to remove text, or restore original pixels.",
    // Clean Box Tool
    cleanBoxTitle: "Clean Box Tool",
    cleanBoxDesc: "Erase content, fill with color, or restore original pixels.",
    smartErase: "Smart Erase (AI)",
    enableInpaintHint: "Please enable Inpainting in Settings first.",
    manualFill: "Manual Fill",
    fillColor: "Fill Color",
    fillSelected: "Fill Selected Box",
    batchOperations: "Batch Operations",
    fillCurrentPage: "Fill All (Current Page)",
    fillAllPages: "Fill All (All Pages)",
    restore: "Restore Region",
    restoreHint: "Revert to original pixels",
    goBoxCleaner: "Go to Box Cleaner",
    boxCleanerDesc: "Switch to Paint Mode Box Tool to clean text.",
    // Workspace Layers
    layerOriginal: "Original",
    layerClean: "Clean",
    layerFinal: "Translated",
    deleteInpaint: "Delete Inpaint Layer",
    // Paint Tool
    brushSize: "Brush Size",
    brushColor: "Brush Color",
    brushSettings: "Brush Settings",
    pickScreenColor: "Pick Screen Color",
    // Tooltips
    fontSizeTooltip: "Font Size",
    maskSizeTooltip: "Mask Size",
    processPending: "Process Pending (Auto)",
    scanCurrent: "Scan Current (Local Detect)",
    scanAll: "Scan All (Local Detect)",
    cleanCurrent: "Clean Current (Inpaint)",
    cleanAll: "Clean All (Inpaint)",
    pickColor: "Pick color from screen",
    transparentColor: "Transparent (No Fill)",
    bringToFront: "Bring to Front",
    moveUp: "Move Up",
    moveDown: "Move Down",
    sendToBack: "Send to Back",
    clearAll: "Clear All",
    skippedRestore: "Skipped API (Click to Restore)",
    skipAPI: "Skip API Processing",
    copyPromptHint: "Copy prompt for external AI",
    loadTemplateHint: "Load sample JSON",
    helpDocs: {
      title: "User Guide",
      intro: "MangaType Live is a web-native comic typesetting tool with integrated AI translation and automated layout features.",
      step1Title: "1. Import Images",
      step1Desc: "Click 'Add Files' in the sidebar or simply **Drag & Drop** images/folders into the window. Clipboard pasting is also supported.",
      step2Title: "2. AI Detection & Translation",
      step2Desc: "Click the **AI Translate** button in the sidebar to reveal options for single or batch processing. Supports both auto-detection and manual mask guidance.",
      step3Title: "3. Edit Bubbles",
      step3Desc: "Click a bubble to select it. Drag the **8 control points** to resize (corners for proportional, edges for directional). Use the right panel to edit text, font, direction, and mask style.",
      step4Title: "4. Export Results",
      step4Desc: "Click **Save Image** to download the current page, or **ZIP All** for the entire batch. The **Merge** function burns the text into the image permanently (irreversible).",
      advancedTitle: "Advanced Features",
      advancedFeatures: [
        {
          title: "Mask Tool (Mode 2)",
          desc: "Use the Mask Tool from the toolbar to draw boxes around specific areas. These boxes can be used for: 1. Sending only masked content (Masked Mode); 2. Providing AI hints; 3. Snapping AI bubbles."
        },
        {
          title: "Local Text Detection (Local Detection)",
          desc: "A helper for the AI. Requires running our Python detection service locally. When enabled, it extracts precise text coordinates and sends them as 'spatial hints' to the LLM."
        },
        {
          title: "Manual Brush (Paint)",
          desc: "Manually fix artifacts on the Clean layer using the brush tool. You can pick colors from the image to cover up leftover text."
        },
        {
          title: "Merge Layers",
          desc: "Similar to 'Merge Down' in Photoshop. It permanently 'burns' all current floating bubbles into the image pixels. Once merged, bubbles become part of the image and can no longer be edited. Use this to finalize a page or prevent lag with too many objects."
        }
      ],
      tipsTitle: "Shortcuts & Tips",
      tipsList: [
        "Ctrl+Z / Ctrl+Y: Undo / Redo",
        "Selected + Mouse Wheel: Adjust Font Size",
        "Selected + Alt + Mouse Wheel: Adjust Mask Size",
        "Delete / Backspace: Delete selected bubble",
        "Hold Ctrl while dragging: Fine precision",
        "Double click background: Deselect"
      ]
    }
  }
};

export type Language = 'zh' | 'en';
export type TranslationKey = keyof typeof translations.zh;

export const t = (key: string, lang: Language): string => {
  const keys = key.split('.');
  let value: any = translations[lang];
  for (const k of keys) {
    value = value?.[k];
  }
  return typeof value === 'string' ? value : key;
};
